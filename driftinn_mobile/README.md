# Driftinn Mobile Application

This is the mobile client for **Driftinn**, a social platform designed to connect university students based on personality compatibility. Built with **Flutter** and **Firebase**.

---

## üèóÔ∏è Project Architecture

The project follows a **Feature-based + Layered** architecture to ensure scalability and maintainability.

### Directory Structure (`lib/`)
The codebase is organized into key directories:

-   **`core/`**: Contains shared resources used across the entire app.
    -   `services/`: Backend integration and business logic.
    -   `theme/`: Design specifications and styling configurations.
-   **`features/`**: Contains the UI and logic for specific functional areas (e.g., Authentication, MBTI).
-   **`main.dart`**: The application entry point.

---

## üîÑ Application Flow

### 1. Initialization
When the app launches (`main.dart`), it:
1.  Initializes Firebase.
2.  Sets up the **AppTheme** (Dark Mode).
3.  Launches the `LoginScreen`.

### 2. Authentication Flow (Registration)
The registration process is a multi-step verify-then-create flow:

1.  **Campus Verification** (`email_verification_screen.dart`):
    -   User enters their valid college email.
    -   System sends an OTP (handled by backend/email service).
    -   User verifies the email to prove student status.
    
2.  **Phone Verification** (`phone_verification_screen.dart`):
    -   User enters their mobile number.
    -   App generates and sends an OTP via SMS (integration).
    -   **Important**: OTPs are securely stored and verified against Cloud Firestore (`driftinn-db`).
    -   Local validation ensures the correct code is entered before proceeding.

3.  **Password Creation** (`password_enter_screen.dart`):
    -   User sets a strong password.
    -   Input validation checks for strength (length, numbers, special chars).
    -   **Account Creation**: This step finalized the process by creating the user account in **Firebase Auth** using the verified email and new password.

4.  **Onboarding** (`mbti_intro_screen.dart`):
    -   After successful account creation, the user is redirected here.
    -   Introduces the Personality Test (MBTI) which is the core value proposition of Driftinn.

---

## üìÇ File Documentation

### **Root**
-   **`main.dart`**:
    -   **Role**: The root widget of the application.
    -   **Key Functions**: App configuration, Route definitions (if any), Theme application.
-   **`firebase_options.dart`**:
    -   **Role**: Configuration file generated by FlutterFire CLI.
    -   **Key Functions**: Contains API keys and App IDs to connect the app to the specific Firebase project (`driftinn-mobile-app-2025`).

### **Core Layer** (`lib/core/`)
#### `services/`
-   **`auth_service.dart`**:
    -   **Role**: Wrapper around `FirebaseAuth`.
    -   **Key Functions**: `signIn`, `signUp`, `signOut`, `getCurrentUser`. Handles low-level auth exceptions.
-   **`database_service.dart`**:
    -   **Role**: Wrapper around `CloudFirestore`.
    -   **Key Functions**: 
        -   `storeOTP/verifyOTP`: Manages email verification codes.
        -   `storePhoneOTP/verifyPhoneOTP`: Manages phone verification codes.
        -   **Config**: Explicitly connects to the `driftinn-db` database instance.

#### `theme/`
-   **`app_theme.dart`**:
    -   **Role**: Centralized source of truth for styling.
    -   **Key Properties**: 
        -   `primary`: The main brand color (Purple/Indigo).
        -   `backgroundDark`: The app's main background color.
        -   `inputDecorationTheme`: Defines the rounded, glassmorphism style of text inputs.

### **Features Layer** (`lib/features/`)
#### `auth/screens/`
-   **`login_screen.dart`**:
    -   **Role**: The landing page for unauthenticated users. Allows existing users to sign in or new users to start registration.
-   **`email_verification_screen.dart`**:
    -   **Role**: Step 1 of Registration. Validates the user's institutional email address.
-   **`phone_verification_screen.dart`**:
    -   **Role**: Step 2 of Registration. Validates the user's phone number for security and identity.
    -   **Logic**: Sends OTP -> Stores in DB -> User inputs code -> Verifies against DB.
-   **`password_enter_screen.dart`**:
    -   **Role**: Step 3 of Registration. Securely sets the user's password.
    -   **Logic**: Creates the actual Firebase User account upon success and redirects to the MBTI Intro.

#### `mbti/screens/`
-   **`mbti_intro_screen.dart`**:
    -   **Role**: Introduction screen for the personality assessment.
    -   **UI**: Features a progress bar, explanatory illustration, and information cards about the test duration and privacy.

---

## üõ†Ô∏è Technology Stack

-   **Frontend**: Flutter (Dart)
-   **Backend**: Firebase (Auth, Firestore)
-   **State Management**: `setState` (Local Widget State) / Service Locator Pattern
-   **Fonts**: Google Fonts (`Plus Jakarta Sans`, `Inter`)
-   **Icons**: Material Symbols Outlined
